<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>MIDIpart.com - Articulation Splitter</title>
    <!-- <script defer src="https://cdnjs.cloudflare.com/ajax/libs/tone/14.8.49/Tone.js"></script> -->
  <script defer src="https://cdn.jsdelivr.net/npm/@tonejs/midi@2.0.27/build/Midi.min.js"></script>
  <link defer href="https://cdnjs.cloudflare.com/ajax/libs/noUiSlider/15.7.0/nouislider.min.css" rel="stylesheet">
  <script defer src="https://cdnjs.cloudflare.com/ajax/libs/noUiSlider/15.7.0/nouislider.min.js"></script>
  <script defer src="https://cdnjs.cloudflare.com/ajax/libs/jszip/3.10.1/jszip.min.js"></script>
<script defer src="./js/js.obf4.js"></script>
  <script defer src="./mididump.js"></script>
  <script defer src="./mpas-dump-wrap.js"></script>


  <link href="https://cdnjs.cloudflare.com/ajax/libs/noUiSlider/15.7.0/nouislider.min.css" rel="stylesheet">
  <link rel="stylesheet" href="styles.css">
  <meta name="robots" content="none">
  <meta name="robots" content="noindex, nofollow">
  <style>
    body {
      background: #020024;
background: linear-gradient(90deg, rgba(2, 0, 36, 1) 0%, rgba(39, 9, 121, 0.83) 35%, rgba(0, 212, 255, 1) 100%);
    }
    a {
  text-decoration: none;
  color: inherit;
}

#helpButton {
  position: fixed;
  top: 10px;
  right: 70px;
  z-index: 999;
  border-radius: 50%;
  width: 36px;
  height: 36px;
  font-size: 20px;
  text-align: center;
  line-height: 36px;
  cursor: pointer;
  opacity: 0.4;
  transition: opacity 0.4s ease-in-out;
}

#helpButton:hover {
  opacity: 1;
}

#helpPanel {
  position: fixed;
  top: 0;
  right: -100%;
  width: 420px;
  max-width: 90vw;
  height: 100%;
  background: #fff;
  box-shadow: -4px 0 10px rgba(0,0,0,0.2);
  overflow-y: auto;
  z-index: 998;
  transition: right 0.3s ease;
}

#helpPanel.open {
  right: 0;
}

#helpPanelContent {
  padding: 20px;
  font-family: sans-serif;
  line-height: 1.5;
}

#closeHelp {
  float: right;
  background: none;
  border: none;
  font-size: 20px;
  cursor: pointer;
}



  </style>
</head>
<body>
  <!-- Floating Help Icon -->
<div id="helpButton" title="Help">
  <img src="help-2.svg" width="60px" height="60px">
</div>
  <details id="notePanel" open>
  <summary id="allNotesSumry">ğŸ§± All Notes (Overview)</summary>
  <div id="noteTiles"></div>
</details>

    <div id="zoomWrapper">
    
  
  <div id="zoomControls">
    <button id="zoomOut">âˆ’</button>
    <button id="zoomIn">ï¼‹</button>
  </div>
  <div class="container">
    <div id="volume-control" style="visibility: hidden;">
        <span class="prevent-select">Volume</span>
        <input type="range" id="volSlider" min="-24" max="0" step="1" value="-12" style="width: 100px;">
    </div>
    <div id="logo">
        <!-- <img src="mp-icon-2.svg" height="80px" /><br> -->
        
    </div>
    
      <div id="headline">
     <a href="" onclick="location.reload(); return false;">
      <h1 class="prevent-select">Orchestral Articulation Splitter</h1>
     </a>

    <span class="prevent-select subheader">Export multiple part articulations from any midi file. Beta v1.0</span>
    </div>
    <div id="libraryStatus" class="library-status library-loading">
      <!-- ğŸ“š Loading libraries... -->
    </div>
    <div class="top-panel-wrapper">
  <button id="toggleTopPanel" class="collapse-btn">ğŸ”¼</button>
    <div id="topPanel">
      

    <div class="upload-section">
      
      <label for="midiFile" id="midiFileLabel" class="prevent-select">
        ğŸ“ Load MIDI File
      </label>
      <input type="file" id="midiFile" accept=".mid,.midi" style="display:none" />
      <br><br>... or drop a midi file on this panel to open<br><br>
      <p style="margin-top: 1rem; color: #718096;" class="prevent-select">
        <br>
        
        
        Filter By Length: Export up to 4 midi parts: shorts / mediums / longs / legato<br><br>
        Filter By Velocity: Export up to 3 midi parts: low / medium / high
      </p>
        <div id="currentFileName" style="text-align: center; margin-top: 1rem; font-weight: bold; color: #4a5568;">
        <!-- Filename will appear here -->
        </div>
        <div id="repeatFileWarning" style=" display:none; margin-top: 0.5rem; color: #e53e3e; font-weight: bold;">
  âš ï¸ You've loaded this file before.
</div>
        

        </div>
    </div>
    </div>
    

    <div class="controls" id="controls" style="display: none;">
     
      <button id="playBtn" class="play-btn prevent-select">â–¶ï¸ Play MIDI</button>
      <button id="stopBtn" class="stop-btn prevent-select" disabled>â¹ï¸ Stop</button><br>
      
    </div>
    <div id="aux-controls" style="visibility: hidden;">
       <label class="polyphonicToggle"><input type="checkbox" id="polyphonicToggle" checked/>Polyphonic</label>
       
    </div>
<div id="aux-controls-2" style="visibility: hidden;">
       <label style="display:block; " id="forceLongVoiceWrapper" class="forceLongVoiceWrapper">
      <input type="checkbox" id="forceLongVoice" />Force Single Voice
    </label>
       
    </div>

    <details id="legatoDetails" style="display: none; margin-top:40px">
    <summary>ğŸ¶ Legato Analysis</summary>
    <div id="legatoInfo"></div>
    <div style="display: flex;">
    <input type="checkbox" id="preserveLegato" />
    <label class="preserveLegato">Preserve legato (unchecking this classifies all notes by length)</label>
  </div><button id="removeLegatoBtn" class="danger-btn">Remove Legato Notes </button><br>ğŸ§¨ Shorten all note lengths so they will no longer overlap 
    
  </details>
    

    

    <div class="thresholds" id="thresholds" style="display: none;">
        

         <!-- ğŸ”€ Segmentation mode selector -->
        <div id="segmentModeSelectorWrapper" style="display:flex;align-items:center;gap:.6rem;margin-bottom:.8rem">
          <label for="segmentMode" class="prevent-select">ğŸ”€ Segment Notes By:</label>
          <select id="segmentMode">
            <option value="length">Note Length</option>
            <option value="velocity">Velocity</option>
            <option value="cc" disabled>Controller (CC)</option>
          </select>
        </div>

        <div id="thresholdUnitsContainer" style="display: flex; align-items: center; gap: 1rem; margin-bottom: 0.5rem;">
        <label for="thresholdUnits" class="prevent-select">ğŸ•’ Length Units:</label>
        <select id="thresholdUnits">
            <option value="ticks">Ticks</option>
            <option value="ms">Milliseconds</option>
        </select>
        </div>

        

        <!-- ğŸš CC selector (appears only in CC mode) -->
        <div id="ccSelectorWrapper" style="display:none;margin-bottom:.8rem">
          <label for="ccSelector" class="prevent-select">ğŸš Select CC:</label>
          <select id="ccSelector"></select>
        </div>

      <div class="legend prevent-select">Thresholds</div>
      <div id="slider"></div>
      <div class="threshold-info">
        <span style="color: #f6ad55;" id="shortLabel">âš¡ Short</span> &lt; <span id="shortVal">120</span> | 
        <span style="color: #4299e1;" id="mediumLabel">ğŸµ Medium</span> &lt; <span id="mediumVal">240</span> | 
        <span style="color: #48bb78;" id="longLabel">ğŸ¶ Long</span> â‰¥ <span id="longVal">240</span><br><br>
        <button id="autoSetThresholds" class="export-btn">âš™ï¸ Auto-Set Thresholds</button>
      </div>
       
    </div>


    <details id="exportAccordion">
    <summary style="
            cursor:pointer;
            font-weight:bold;
            font-size:1.1rem;
            color:#4a5568;
            padding:.6rem 1rem;
            border-radius:8px;
            background:linear-gradient(135deg,#4299e1,#3182ce);
            color:#fff;
            user-select:none;
            
            ">
        ğŸ“¤ Export Split Files
    </summary>
    <div class="export-section" id="exportSection" style="display: none;">
      <h3 class="prevent-select">ğŸ“¤ Export MIDI files</h3>
     <div style="margin-bottom: 1rem;">
        <label for="filenameInput" style="font-weight: bold; color: #4a5568;" class="prevent-select">ğŸ’¾ Output File Name:</label><br>
        <input id="filenameInput" type="text" placeholder="e.g. legato_take3" style="margin-top: 0.5rem; padding: 0.5rem; width: 60%; border-radius: 8px; border: 1px solid #ccc;">
        <div id="filenamePreview" class="prevent-select" style="margin-top: 0.5rem; font-size: 0.9rem; color: #718096;">
            Will export as: <span id="filePreviewValue">yourfile-short.mid</span>
        </div>
        </div>
    

        <button id="analyzeDump" class="export-btn prevent-select">ğŸ§  Run MIDI Dump</button>

      <button id="exportShort" class="export-btn prevent-select">â¬‡ï¸ Export Shorts</button>
      <button id="exportMedium" class="export-btn prevent-select">â¬‡ï¸ Export Mediums</button>
      <button id="exportLong" class="export-btn prevent-select">â¬‡ï¸ Export Longs</button>
      <button id="exportLegato" class="export-btn prevent-select" style="display:none">â¬‡ï¸ Export Legatos</button>
      <div id="zipContainer">
        <label class="zipExportToggle">
          <input type="checkbox" id="zipExportToggle" />
          ğŸ“¦ Zip It
        </label>
        <button id="exportZipBtn" style="display: none;">â¬‡ï¸ Export All as ZIP</button>
      </div>
    </div>
  
    
  
    </div>
    </details>

    


    <div id="output" style=""></div>
    <div id='secret-trigger' title='ğŸ¶ Curious, arent you?'></div>
  </div>


 

  
  <div id="toast" style="
  position: fixed;
  bottom: 1.5rem;
  left: 50%;
  transform: translateX(-50%);
  background: #2d3748;
  color: white;
  padding: 0.75rem 1.25rem;
  border-radius: 8px;
  box-shadow: 0 4px 12px rgba(0,0,0,0.2);
  font-size: 0.95rem;
  z-index: 1000;
  opacity: 0;
  pointer-events: none;
  transition: opacity 0.3s ease;
"></div>
<!-- --------- -->
</div>
<!-- zoom wrapper end -->


<!-- â”€â”€â”€â”€â”€â”€â”€ confirmation modal â”€â”€â”€â”€â”€â”€â”€ -->
<div id="confirmBackdrop">
  <div id="confirmBox">
    <p id="confirmMessage"></p>

    <div class="btnRow">
      <button id="confirmOk">Yes, continue</button>
      <button id="confirmCancel">Cancel</button>
    </div>
  </div>
</div>

























<!-- Track-picker modal -->
<div id="trackModal" class="modal hidden">
  <div class="modal-box">
    <h3>Select a track to load</h3>
    <div id="trackButtons"></div>
  </div>
</div>


<div id="helpPanel">
  <div id="helpPanelContent">
    <button id="closeHelp">âœ–</button>
    <!-- Help content goes here -->
    <div id="helpText">
      <div id="helpText">
<p style="font-weight: bold; font-size: 1.2rem;">Orchestral Articulation Splitter
User Guide v1.0</p>
<h2>ğŸ§  What It Does</h2>
<p>Orchestral Articulation Splitter transforms expressive MIDI performances into DAW-ready articulation-specific tracks using customizable rules. Its smart threshold splitter helps you quickly carve up your parts into multiple midi files - all synced and retaining your original performance data.
<br><br>
âœ… Perfect for:
- Strings, brass, woodwinds, and even keyboard lines
- Creating multiple tracks mapped to static articulations in your sample library
- Avoiding manual note filtering, key switch errors, or mouse-based tedium
<br><br>
ğŸ¯ This tool accelerates realism by splitting MIDI into parts that are easy to assign to pizzicato, marcato, sustains, legato â€” whatever your libraries support.</p>
<h2>ğŸš€ How to Use It</h2>
<h3>1. Load a MIDI File</h3>
<p>Click â€œLoad MIDI Fileâ€ or drag-and-drop a `.mid` file onto the drop zone.</p>
<h3>2. Choose Segmentation Method</h3>
<p>You can split notes using:
<br>
ğŸŸ© Note Length:
- Use the dual slider to define what counts as Short, Medium, and Long.
- Visual feedback updates live.
<br><br>
ğŸŸ¨ Velocity:
- Click the â€œVelocityâ€ tab to split by how hard notes were played.
- Threshold sliders define what counts as Soft, Medium, or Hard.
<br><br>
ğŸŸ¦ CC Modes*:
- Split by CC1 (Mod Wheel), CC11 (Expression), or any other CC data present in the file.
<br>
*coming soon</p>
<h3>3. Playback & Audition</h3>
<p>Use the transport controls to preview how your notes are classified.</p>
<p>Playback Modes:</p>
<p>ğŸ§ Each classification group plays with a unique sound, giving you audible feedback as well as visual tile coloring.</p>
<h3>4. Legato Options (Optional)</h3>
<p>You have three ways to deal with legato notes (overlapping/slurred):</p>
<h3>5. Exporting Files</h3>
<p>Each note grouping (Short/Low, Medium, Long/Hi, Legato etc.) is built as a separate MIDI file</p>
<p>Files are perfectly aligned and retain the original performance timing. Just drop them on the same start location in your DAW.</p>
<p>You can:</p>
<p>Rename each file before saving</p>
<p>Download them individually</p>
<p>Or download them all at once in a ZIP bundle</p>
<br><br>
<h2>âš™ï¸ Control Cheat Sheet</h2>
<h2>ğŸ’¡ Tips / Notes</h2>
<p>Quantize loosely, or just clean up note starts/ends before importing for best split accuracy.</p>
<p>Use Auto-Set to get quick usable defaults, then fine-tune by ear. You can also view the note tiles in the top and see an animation as they are synced to playback. Their color will reflect their short/low/medium/long/hi/legato classification as determined by the slider positions.</p>
<p>Legato detection is on by default, and legato will override any other type of detection. To ignore legato, uncheck the â€˜Preserve Legatoâ€™ checkbox. This is particularly useful for polyphonic parts like strings, ensembles or pads. To remove it altogether (this will change your note lengths) Click on the â€˜Remove Legato Notesâ€™ button. If you load a file and the â€˜Legato Analysisâ€™ section is missing, it means there were no overlapping notes in the file.</p>
<p>Velocity Mode is a great for expressive solo lines with dynamic phrasing.</p>
<h2>ğŸ” Activation</h2>
<p>The app checks for an active license status when it opens.</p>
<p>Unless its the demo version, if you're offline and haven't previously activated it, the app will be blocked.</p>
<p>If you have activated it before, the app will run offline for a grace period (default: 7 days).</p>
<h2>ğŸ†˜ Support</h2>
<p>Visit https://midipart.com or use the contact form on the site for support or feature suggestions.</p>
</div>
    </div>
  </div>
</div>

<script>
  const helpButton = document.getElementById('helpButton');
const helpPanel = document.getElementById('helpPanel');
const closeHelp = document.getElementById('closeHelp');

helpButton.addEventListener('click', () => {
  helpPanel.classList.add('open');
  helpButton.style.display = "none";
});

closeHelp.addEventListener('click', () => {
  helpPanel.classList.remove('open');
  helpButton.style.display = "block";
});

</script>


</body>
</html>